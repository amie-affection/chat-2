(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("L1EO"),n("hi3g"),n("D/wG"),n("JBxO"),n("FdtR"),n("wcNg"),n("wCa+");var r=n("czhI"),o=n.n(r);function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var i=function(e){var t=[];for(var n in e)t.push(Object.assign({id:n},e[n]));return t},c=function(e){try{return o.a.post("https://project-chat-79c90.firebaseio.com/messenger.json",e)}catch(e){console.log("Error!")}},s=function(){return(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("https://project-chat-79c90.firebaseio.com/messenger.json");case 3:return t=e.sent,e.abrupt("return",i(t.data));case 7:e.prev=7,e.t0=e.catch(0),console.log("Error!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))})();var e},u=function(e,t){o.a.patch("https://project-chat-79c90.firebaseio.com/messenger/"+e+".json",t)},l=function(e){o.a.delete("https://project-chat-79c90.firebaseio.com/messenger/"+e+".json")},d=(n("lYjL"),n("IlJM"),n("x3Br"),{items:[]}),f=document.querySelector(".listMessages"),m=function(e,t){return"<span class='listMessagesItemText'>"+e+"</span>\n  "+(t?'<img src="'+t+'"/>':"")+"\n      <button class='edit' data-action='edit'>Edit</button>\n      <button class='delete' data-action='delete'>Delete</button>"},v=function(e){var t=e.message,n=e.id,r=e.picture;return"\n      <li data-id='"+n+"'>\n      "+m(t,void 0===r?"":r)+"\n      </li>\n      "},p=function(e){if("delete"===e.target.dataset.action){var t=e.target.closest("li[data-id]").dataset.id;console.log(t),function(e){d.items=d.items.filter((function(t){return t.id!==e}))}(t),g(d.items),l(t)}if("edit"===e.target.dataset.action){var n=e.target.closest("li[data-id]"),r=n.dataset.id,o=d.items.find((function(e){return e.id===r})),a="<input class = 'inputElement' value='"+o.message+"' type='text'/>\n      <button data-action='save'>Save</button>";n.innerHTML=a;document.querySelector('[data-action="save"]').addEventListener("click",(function e(){var t=document.querySelector(".inputElement").value;console.log(t),document.querySelector('[data-action="save"]').removeEventListener("click",e),n.innerHTML=m(t),o.message=t,console.log(d.items),u(r,{message:t}),console.log({message:t})})),console.log(n)}},g=function(e){var t=e.reduce((function(e,t){return e+v(t)}),"");f.innerHTML=t},h=function(e){f.insertAdjacentHTML("beforeend",v(e)),console.log(v(e))};function w(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var b=function(){var e=document.querySelector(".js-form").elements.fileFormInput;return new Promise((function(t){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.readAsDataURL(e.files[0])})).then((function(e){console.log("")}))},j=function(){var e=document.querySelector(".js-form"),t=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,b();case 3:r=e.elements.chatFormTextaria.value,c({message:r,picture:""}).then((function(e){var t={id:e.data.name,message:r,picture:""};h(t),d.items=[].concat(d.items,[t]),console.log(d.items)})),e.reset();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();e.addEventListener("submit",t)};(function(){s().then((function(e){g(e),d.items=[].concat(e),f.addEventListener("click",p)}))})(),j()}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.db80522442a0545c8a01.js.map