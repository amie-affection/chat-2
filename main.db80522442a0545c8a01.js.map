{"version":3,"sources":["webpack:///./services.js","webpack:///./data.js","webpack:///./components/listMessages.js","webpack:///./components/chatForm.js","webpack:///./index.js"],"names":["convertData","data","result","elementId","push","id","apiServices","content","axios","post","error","console","log","get","patch","delete","messenger","items","listMessages","document","querySelector","innerItem","message","picture","createItem","handleClick","e","target","dataset","action","closest","filter","item","deleteItem","createListItem","dataId","messageAds","find","innerMarkup","innerHTML","addEventListener","saveNewData","value","removeEventListener","messages","markup","reduce","acc","pastMessage","insertAdjacentHTML","createbase","element","elements","fileFormInput","Promise","resolve","reader","FileReader","onloadend","readAsDataURL","files","then","chatForm","createNewMessage","preventDefault","messageContent","chatFormTextaria","response","name","reset","getListMessages"],"mappings":"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","file":"main.db80522442a0545c8a01.js","sourcesContent":["import axios from 'axios';\r\n\r\n// const convertData = data => {\r\n// //   console.log(data);\r\n//   const result = [];\r\n//   for (const element in data) {\r\n//     // console.log(element);\r\n//     // console.log(data[element]);\r\n//     result.push({ id: element, ...data[element] });\r\n//   }\r\n//   return result;\r\n// };\r\n\r\n// const createMessage = content => {\r\n//   try {\r\n//     axios.post(\r\n//       'https://project-chat-79c90.firebaseio.com/messenger.json',\r\n//       content,\r\n//     );\r\n//   } catch (error) {\r\n//     console.log('Error!');\r\n//   }\r\n// };\r\n\r\n// const getMessage = async () => {\r\n//   try {\r\n//     const result = await axios.get(\r\n//       'https://project-chat-79c90.firebaseio.com/messenger.json',\r\n//     );\r\n//     return convertData(result.data);\r\n//   } catch (error) {\r\n//     console.log('Error!');\r\n//   }\r\n// };\r\n\r\n// const editMessage = (id, content) => {\r\n//   axios.patch(\r\n//     `https://project-chat-79c90.firebaseio.com/messenger/${id}.json`,\r\n//     { content },\r\n//   );\r\n// };\r\n\r\n// const deleteMessage = id => {\r\n//   axios.delete(\r\n//     `https://project-chat-79c90.firebaseio.com/messenger/${id}.json`,\r\n//   );\r\n// };\r\n\r\n// export { createMessage, getMessage, editMessage, deleteMessage };\r\n\r\nconst convertData = data => {\r\n  //   console.log(data);\r\n  const result = [];\r\n  for (const elementId in data) {\r\n    // console.log(element);\r\n    // console.log(data[element]);\r\n    result.push({ id: elementId, ...data[elementId] });\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const apiServices = {\r\n  createMessage(content) {\r\n    try {\r\n      return axios.post(\r\n        'https://project-chat-79c90.firebaseio.com/messenger.json',\r\n        content,\r\n      );\r\n    } catch (error) {\r\n      console.log('Error!');\r\n    }\r\n  },\r\n\r\n  async getMessage() {\r\n    try {\r\n      const result = await axios.get(\r\n        'https://project-chat-79c90.firebaseio.com/messenger.json',\r\n      );\r\n      return convertData(result.data);\r\n    } catch (error) {\r\n      console.log('Error!');\r\n    }\r\n  },\r\n\r\n  editMessage(id, content) {\r\n    axios.patch(\r\n      `https://project-chat-79c90.firebaseio.com/messenger/${id}.json`,\r\n      content,\r\n    );\r\n  },\r\n\r\n  deleteMessage(id) {\r\n    axios.delete(\r\n      `https://project-chat-79c90.firebaseio.com/messenger/${id}.json`,\r\n    );\r\n  },\r\n};\r\n","export let messenger = {items: []};","import axios from 'axios';\r\nimport { apiServices } from '../services';\r\nimport { messenger } from '../data';\r\n\r\nconst listMessages = document.querySelector('.listMessages');\r\nconst innerItem = (message, picture) => {\r\n  return `<span class='listMessagesItemText'>${message}</span>\r\n  ${picture ? `<img src=\"${picture}\"/>` : ''}\r\n      <button class='edit' data-action='edit'>Edit</button>\r\n      <button class='delete' data-action='delete'>Delete</button>`;\r\n};\r\n\r\nconst createItem = ({ message, id, picture = '' }) => {\r\n  return `\r\n      <li data-id='${id}'>\r\n      ${innerItem(message, picture)}\r\n      </li>\r\n      `;\r\n};\r\n\r\nconst deleteItem = id => {\r\n  messenger.items = messenger.items.filter(item => item.id !== id);\r\n};\r\n\r\nconst handleClick = e => {\r\n  if (e.target.dataset.action === 'delete') {\r\n    const id = e.target.closest('li[data-id]').dataset.id;\r\n    console.log(id);\r\n    deleteItem(id);\r\n    createListItem(messenger.items);\r\n    apiServices.deleteMessage(id);\r\n  }\r\n  if (e.target.dataset.action === 'edit') {\r\n    const dataId = e.target.closest('li[data-id]');\r\n    const id = dataId.dataset.id;\r\n    const messageAds = messenger.items.find(item => item.id === id);\r\n    const innerMarkup = `<input class = 'inputElement' value='${messageAds.message}' type='text'/>\r\n      <button data-action='save'>Save</button>`;\r\n    dataId.innerHTML = innerMarkup;\r\n    const saveNewData = () => {\r\n      const message = document.querySelector('.inputElement').value;\r\n      console.log(message);\r\n      document\r\n        .querySelector('[data-action=\"save\"]')\r\n        .removeEventListener('click', saveNewData);\r\n      dataId.innerHTML = innerItem(message);\r\n      messageAds.message = message;\r\n      console.log(messenger.items);\r\n      apiServices.editMessage(id, { message });\r\n      console.log({ message });\r\n    };\r\n    document\r\n      .querySelector('[data-action=\"save\"]')\r\n      .addEventListener('click', saveNewData);\r\n    console.log(dataId);\r\n  }\r\n};\r\n\r\nconst createListItem = messages => {\r\n  const markup = messages.reduce((acc, message) => {\r\n    return (acc += createItem(message));\r\n  }, '');\r\n  listMessages.innerHTML = markup;\r\n};\r\n\r\nexport const pastMessage = message => {\r\n  listMessages.insertAdjacentHTML('beforeend', createItem(message));\r\n  console.log(createItem(message));\r\n};\r\n\r\nconst getListMessages = () => {\r\n  apiServices.getMessage().then(response => {\r\n    createListItem(response);\r\n    // console.log(response);\r\n    messenger.items = [...response];\r\n    listMessages.addEventListener('click', handleClick);\r\n  });\r\n};\r\n\r\nexport default getListMessages;\r\n","import { apiServices } from '../services';\r\nimport { pastMessage } from './listMessages';\r\nimport { messenger } from '../data';\r\n\r\nlet picture = '';\r\n\r\nfunction toDataURL(element) {}\r\nconst createbase = () => {\r\n  const element = document.querySelector('.js-form').elements.fileFormInput;\r\n  toDataURL(element);\r\n  return new Promise(resolve => {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => resolve(reader.result);\r\n    reader.readAsDataURL(element.files[0]);\r\n  }).then(data => {\r\n    picture === data, console.log(picture);\r\n  });\r\n};\r\n\r\nconst chatForm = () => {\r\n  const chatForm = document.querySelector('.js-form');\r\n\r\n  const createNewMessage = async e => {\r\n    e.preventDefault();\r\n    await createbase();\r\n    const messageContent = chatForm.elements.chatFormTextaria.value;\r\n    apiServices\r\n      .createMessage({ message: messageContent, picture: picture })\r\n      .then(response => {\r\n        const message = {\r\n          id: response.data.name,\r\n          message: messageContent,\r\n          picture: picture,\r\n        };\r\n        pastMessage(message);\r\n        messenger.items = [...messenger.items, message];\r\n        console.log(messenger.items);\r\n      });\r\n    // pastMessage(messageContent);\r\n    chatForm.reset();\r\n  };\r\n\r\n  chatForm.addEventListener('submit', createNewMessage);\r\n};\r\n\r\nexport default chatForm;\r\n","import './styles.css';\r\nimport chatForm from './components/chatForm';\r\nimport getListMessages from './components/listMessages';\r\n\r\n\r\ngetListMessages();\r\nchatForm();"],"sourceRoot":""}